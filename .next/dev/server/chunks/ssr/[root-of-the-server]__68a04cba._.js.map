{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Rizky/Downloads/yu-gi-oh-duel-links-catalog/components/header.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, Suspense } from \"react\"\r\nimport { useRouter, useSearchParams, usePathname } from \"next/navigation\"\r\nimport Link from \"next/link\"\r\nimport Image from \"next/image\" \r\nimport { Search, Filter, X } from \"lucide-react\"\r\n\r\n// Import hook debounce yang baru dibuat\r\nimport { useDebounce } from \"@/hooks/useDebounce\"\r\n\r\n// --- KOMPONEN ISI (LOGIC) ---\r\nfunction HeaderContent() {\r\n    const router = useRouter()\r\n    const searchParams = useSearchParams() \r\n    const pathname = usePathname()\r\n\r\n    const [searchQuery, setSearchQuery] = useState(\"\")\r\n    const [selectedType, setSelectedType] = useState(\"all\")\r\n\r\n    // Definisikan nilai yang ditunda (500ms) untuk pembaruan URL\r\n    const debouncedSearchQuery = useDebounce(searchQuery, 200);\r\n\r\n    // KODE 1 (Lama): Sinkronisasi state lokal dari URL saat load/perubahan URL\r\n    useEffect(() => {\r\n        const q = searchParams.get(\"q\") || \"\"\r\n        const type = searchParams.get(\"type\") || \"all\"\r\n        \r\n        // Hanya set local state jika nilai URL berbeda untuk menghindari reset saat typing\r\n        if (searchQuery !== q) {\r\n            setSearchQuery(q)\r\n        }\r\n        setSelectedType(type)\r\n    }, [searchParams])\r\n\r\n\r\n    // KODE 2 (BARU): Panggil pembaruan URL HANYA ketika Debounce selesai\r\n    useEffect(() => {\r\n        const urlQuery = searchParams.get(\"q\") || \"\";\r\n        \r\n        // Cek jika nilai debounced berbeda dengan nilai di URL (dan bukan load awal)\r\n        if (debouncedSearchQuery !== urlQuery) {\r\n            handleUpdateParams(debouncedSearchQuery, selectedType);\r\n        }\r\n    }, [debouncedSearchQuery, selectedType]); \r\n    // Effect ini hanya berjalan 500ms setelah kamu berhenti mengetik\r\n\r\n    const handleUpdateParams = (newSearch: string, newType: string) => {\r\n        // Hanya update URL jika kita berada di halaman /cards atau perlu navigasi ke sana\r\n        if (pathname !== \"/cards\") {\r\n            router.push(`/cards?q=${newSearch}&type=${newType}`)\r\n            return\r\n        }\r\n        \r\n        router.replace(`/cards?q=${newSearch}&type=${newType}`)\r\n    }\r\n\r\n    const onSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value\r\n        // HANYA update state lokal untuk input yang mulus (smooth typing), \r\n        // Debounce hook yang akan mengurus pembaruan URL 500ms kemudian.\r\n        setSearchQuery(val)\r\n    }\r\n\r\n    const onTypeChange = (type: string) => {\r\n        setSelectedType(type)\r\n        // Pembaruan tombol filter dilakukan secara instan (tidak perlu debounce)\r\n        handleUpdateParams(searchQuery, type) \r\n    }\r\n\r\n    return (\r\n        <header className=\"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 shadow-xl pt-safe\">\r\n            <div className=\"max-w-6xl mx-auto px-4 py-3\">\r\n                \r\n                <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n                    \r\n                    {/* --- BARIS 1: LOGO & SEARCH BAR --- */}\r\n                    <div className=\"flex items-center gap-3 w-full md:w-auto flex-1\">\r\n                        <Link href=\"/\" className=\"flex-shrink-0 group\">\r\n                            <Image \r\n                                src=\"/YuGiOh_Duel_Links.png\" \r\n                                alt=\"Yu-Gi-Oh! Catalog\" \r\n                                width={120} \r\n                                height={60} \r\n                                priority\r\n                                className=\"h-8 w-auto md:h-12 object-contain transition-transform group-hover:scale-110 drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]\"\r\n                            />\r\n                        </Link>\r\n\r\n                        {/* Search Bar */}\r\n                        <div className=\"relative flex-1 group\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground group-focus-within:text-primary transition-colors\" />\r\n                            <input\r\n                                suppressHydrationWarning \r\n                                type=\"text\"\r\n                                placeholder=\"Search...\"\r\n                                value={searchQuery} // Menggunakan state lokal untuk input\r\n                                onChange={onSearchChange} // Hanya update state lokal\r\n                                className=\"w-full h-9 md:h-10 bg-secondary/50 border border-white/10 rounded-full pl-9 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all text-white placeholder:text-muted-foreground\"\r\n                            />\r\n                            {searchQuery && (\r\n                                <button \r\n                                    suppressHydrationWarning\r\n                                    onClick={() => {setSearchQuery(\"\"); handleUpdateParams(\"\", selectedType)}}\r\n                                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-white p-1\"\r\n                                >\r\n                                    <X className=\"w-3 h-3\" />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* --- BARIS 2: FILTER BUTTONS --- */}\r\n                    <div className=\"flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide w-full md:w-auto border-t border-white/5 pt-2 md:pt-0 md:border-t-0\">\r\n                        <div className=\"flex items-center gap-1 text-muted-foreground text-[10px] font-medium pr-2 border-r border-white/10 mr-2 flex-shrink-0\">\r\n                            <Filter className=\"w-3 h-3\" />\r\n                            <span>Filter</span>\r\n                        </div>\r\n                        \r\n                        {[\"all\", \"Monster\", \"Spell\", \"Trap\"].map((type) => (\r\n                            <button\r\n                                key={type}\r\n                                suppressHydrationWarning\r\n                                onClick={() => onTypeChange(type)}\r\n                                className={`\r\n                                    px-3 py-1 rounded-full text-[10px] md:text-xs font-bold transition-all whitespace-nowrap border flex-shrink-0\r\n                                    ${selectedType === type \r\n                                        ? \"bg-blue-600 border-blue-500 text-white shadow-[0_0_10px_rgba(37,99,235,0.5)]\" \r\n                                        : \"bg-secondary/30 border-white/5 text-muted-foreground hover:bg-secondary hover:text-white\"\r\n                                    }\r\n                                `}\r\n                            >\r\n                                {type === \"all\" ? \"All\" : type}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\n// --- COMPONENT WRAPPER ---\r\nexport function Header() {\r\n    return (\r\n        <Suspense fallback={<div className=\"fixed top-0 left-0 right-0 z-10 h-12 bg-black/90 border-b border-white/10\" />}>\r\n            <HeaderContent />\r\n        </Suspense>\r\n    )\r\n}"],"names":[],"mappings":"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"}}]
}